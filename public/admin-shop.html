<!DOCTYPE html>
<html lang="eng">
  <head>
    <meta charset="UTF-8" />
    <meta name="description" content="Apex Gym Shop Management" />
    <meta name="keywords" content="Gym, Admin, Shop, Management" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta http-equiv="X-UA-Compatible" content="ie=edge" />
    <title>Apex Gym - Shop Management</title>

    <!-- Google Font -->
    <link
      href="https://fonts.googleapis.com/css?family=Muli:300,400,500,600,700,800,900&amp;display=swap"
      rel="stylesheet"
    />
    <link
      href="https://fonts.googleapis.com/css?family=Oswald:300,400,500,600,700&amp;display=swap"
      rel="stylesheet"
    />

    <!-- Css Styles -->
    <link rel="stylesheet" href="css/bootstrap.min.css" type="text/css" />
    <link rel="stylesheet" href="css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="css/style.css" type="text/css" />

    <style>
      /* Global black background */
      body {
        background-color: #000;
        color: #fff;
        min-height: 100vh;
      }

      .admin-container {
        max-width: 1400px;
        margin: 0 auto;
        padding: 20px;
      }

      .admin-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 20px 0;
        border-bottom: 1px solid #333;
        margin-bottom: 30px;
      }

      .admin-logo {
        display: flex;
        align-items: center;
      }

      .admin-logo img {
        max-width: 80px;
        margin-right: 15px;
      }

      .admin-title h1 {
        color: #e53637;
        margin: 0;
        font-size: 24px;
      }

      .admin-nav {
        display: flex;
        gap: 10px;
        margin-bottom: 30px;
      }

      .nav-btn {
        background: #1a1a1a;
        color: #b7b7b7;
        border: 1px solid #333;
        padding: 10px 20px;
        border-radius: 4px;
        text-decoration: none;
        transition: all 0.3s;
      }

      .nav-btn:hover,
      .nav-btn.active {
        background: #e53637;
        color: #fff;
        text-decoration: none;
      }

      .admin-actions {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 20px;
      }

      .search-box {
        display: flex;
        gap: 10px;
      }

      .search-input {
        background: #1a1a1a;
        border: 1px solid #333;
        border-radius: 4px;
        padding: 10px 15px;
        color: #fff;
        min-width: 300px;
      }

      .search-input:focus {
        outline: none;
        border-color: #e53637;
      }

      .btn-primary {
        background: #e53637;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
        transition: all 0.3s;
      }

      .btn-primary:hover {
        background: #fff;
        color: #e53637;
      }

      .products-grid {
        display: grid;
        grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
        gap: 20px;
        margin-bottom: 30px;
      }

      .product-card {
        background: #1a1a1a;
        border-radius: 8px;
        border: 1px solid #333;
        overflow: hidden;
        transition: all 0.3s;
      }

      .product-card:hover {
        transform: translateY(-5px);
        border-color: #e53637;
      }

      .product-image {
        height: 200px;
        background: #222;
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
      }

      .product-image img {
        width: 100%;
        height: 100%;
        object-fit: cover;
      }

      .product-details {
        padding: 20px;
      }

      .product-name {
        color: #fff;
        font-size: 18px;
        font-weight: 600;
        margin-bottom: 10px;
      }

      .product-description {
        color: #b7b7b7;
        font-size: 14px;
        margin-bottom: 15px;
        display: -webkit-box;
        -webkit-box-orient: vertical;
        overflow: hidden;
      }

      .product-meta {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 15px;
      }

      .product-price {
        color: #e53637;
        font-size: 20px;
        font-weight: 700;
      }

      .product-stock {
        color: #b7b7b7;
        font-size: 14px;
      }

      .product-actions {
        display: flex;
        gap: 10px;
      }

      .btn-edit {
        background: #333;
        color: #fff;
        border: none;
        padding: 8px 15px;
        border-radius: 4px;
        cursor: pointer;
        flex: 1;
        transition: all 0.3s;
      }

      .btn-edit:hover {
        background: #555;
      }

      .btn-delete {
        background: #e53637;
        color: #fff;
        border: none;
        padding: 8px 15px;
        border-radius: 4px;
        cursor: pointer;
        flex: 1;
        transition: all 0.3s;
      }

      .btn-delete:hover {
        background: #c42b2c;
      }

      .empty-state {
        text-align: center;
        padding: 60px 20px;
        color: #b7b7b7;
      }

      .empty-state i {
        font-size: 48px;
        margin-bottom: 20px;
        color: #333;
      }

      /* Modal Styles */
      .modal {
        display: none;
        position: fixed;
        z-index: 10000;
        left: 0;
        top: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.8);
      }

      .modal-content {
        background: #1a1a1a;
        margin: 5% auto;
        padding: 30px;
        border-radius: 10px;
        width: 90%;
        max-width: 600px;
        border: 2px solid #e53637;
        max-height: 90vh;
        overflow-y: auto;
      }

      .modal-header {
        display: flex;
        justify-content: space-between;
        align-items: center;
        margin-bottom: 25px;
      }

      .modal-title {
        color: #e53637;
        font-size: 24px;
        margin: 0;
      }

      .close-modal {
        background: none;
        border: none;
        color: #b7b7b7;
        font-size: 24px;
        cursor: pointer;
      }

      .close-modal:hover {
        color: #fff;
      }

      .form-group {
        margin-bottom: 20px;
      }

      .form-label {
        display: block;
        color: #b7b7b7;
        margin-bottom: 8px;
        font-weight: 600;
      }

      .form-control {
        width: 100%;
        padding: 12px 15px;
        background: #222;
        border: 1px solid #333;
        border-radius: 4px;
        color: #fff;
        font-size: 14px;
      }

      .form-control:focus {
        outline: none;
        border-color: #e53637;
      }

      textarea.form-control {
        min-height: 100px;
        resize: vertical;
      }

      .form-row {
        display: grid;
        grid-template-columns: 1fr 1fr;
        gap: 15px;
      }

      .modal-actions {
        display: flex;
        gap: 10px;
        justify-content: flex-end;
        margin-top: 25px;
      }

      .btn-cancel {
        background: #333;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
      }

      .btn-cancel:hover {
        background: #444;
      }

      .btn-save {
        background: #e53637;
        color: #fff;
        border: none;
        padding: 10px 20px;
        border-radius: 4px;
        cursor: pointer;
      }

      .btn-save:hover {
        background: #fff;
        color: #e53637;
      }

      @media (max-width: 768px) {
        .admin-header {
          flex-direction: column;
          text-align: center;
          gap: 15px;
        }

        .admin-actions {
          flex-direction: column;
          gap: 15px;
          align-items: stretch;
        }

        .search-box {
          width: 100%;
        }

        .search-input {
          min-width: auto;
          flex: 1;
        }

        .products-grid {
          grid-template-columns: 1fr;
        }

        .form-row {
          grid-template-columns: 1fr;
        }

        .modal-content {
          margin: 10% auto;
          padding: 20px;
        }
      }
    </style>
  </head>

  <body>
    <div class="admin-container">
      <!-- Admin Header -->
      <div class="admin-header">
        <div class="admin-logo">
          <img src="img/logo.png" alt="Apex Gym" />
          <div class="admin-title">
            <h1>Shop Management</h1>
          </div>
        </div>
        <div class="admin-user">
          <button
            class="btn-primary"
            onclick="location.href='admin-dashboard.html'"
          >
            Back to Dashboard
          </button>
        </div>
      </div>

      <!-- Navigation -->
      <div class="admin-nav">
        <a href="admin-dashboard.html" class="nav-btn">Dashboard</a>
        <a href="admin-shop.html" class="nav-btn active">Shop</a>
        <a href="admin-blog.html" class="nav-btn">Blog</a>
        <a href="admin-users.html" class="nav-btn">Users</a>
        <a href="admin-orders.html" class="nav-btn">Orders</a>
      </div>

      <!-- Actions -->
      <div class="admin-actions">
        <div class="search-box">
          <input
            type="text"
            class="search-input"
            placeholder="Search products..."
            id="searchInput"
          />
          <button class="btn-primary" onclick="searchProducts()">Search</button>
        </div>
        <button class="btn-primary" onclick="openAddProductModal()">
          <i class="fa fa-plus"></i> Add New Product
        </button>
      </div>

      <!-- Products Grid -->
      <div class="products-grid" id="productsGrid">
        <!-- Products will be loaded here dynamically -->
      </div>

      <!-- Empty State -->
      <div class="empty-state" id="emptyState" style="display: none">
        <i class="fa fa-shopping-bag"></i>
        <h3>No Products Found</h3>
        <p>Get started by adding your first product to the shop.</p>
        <button
          class="btn-primary"
          onclick="openAddProductModal()"
          style="margin-top: 15px"
        >
          Add First Product
        </button>
      </div>
    </div>

    <!-- Add/Edit Product Modal -->
    <div id="productModal" class="modal">
      <div class="modal-content">
        <div class="modal-header">
          <h2 class="modal-title" id="modalTitle">Add New Product</h2>
          <button class="close-modal" onclick="closeProductModal()">
            &times;
          </button>
        </div>
        <form id="productForm">
          <input type="hidden" id="productId" />

          <div class="form-group">
            <label class="form-label" for="productName">Product Name</label>
            <input type="text" class="form-control" id="productName" required />
          </div>

          <div class="form-group">
            <label class="form-label" for="productDescription"
              >Description</label
            >
            <textarea
              class="form-control"
              id="productDescription"
              required
            ></textarea>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="productPrice">Price (₦)</label>
              <input
                type="number"
                class="form-control"
                id="productPrice"
                step="0.01"
                required
              />
            </div>
            <div class="form-group">
              <label class="form-label" for="productStock"
                >Stock Quantity</label
              >
              <input
                type="number"
                class="form-control"
                id="productStock"
                required
              />
            </div>
          </div>

          <div class="form-row">
            <div class="form-group">
              <label class="form-label" for="productCategory">Category</label>
              <select class="form-control" id="productCategory" required>
                <option value="">Select Category</option>
                <option value="supplements">Supplements</option>
                <option value="equipment">Equipment</option>
                <option value="apparel">Apparel</option>
                <option value="accessories">Accessories</option>
              </select>
            </div>
            <div class="form-group">
              <label class="form-label" for="productStatus">Status</label>
              <select class="form-control" id="productStatus" required>
                <option value="active">Active</option>
                <option value="inactive">Inactive</option>
                <option value="out-of-stock">Out of Stock</option>
              </select>
            </div>
          </div>

          <div class="form-group">
            <label class="form-label" for="productImage">Image URL</label>
            <input
              type="url"
              class="form-control"
              id="productImage"
              placeholder="https://example.com/image.jpg"
            />
          </div>

          <div class="modal-actions">
            <button
              type="button"
              class="btn-cancel"
              onclick="closeProductModal()"
            >
              Cancel
            </button>
            <button type="submit" class="btn-save">Save Product</button>
          </div>
        </form>
      </div>
    </div>

    <script>
      // Mock data for demonstration
      let products = JSON.parse(localStorage.getItem("admin_products")) || [
        {
          id: 1,
          name: "Whey Protein",
          description:
            "High-quality whey protein for muscle recovery and growth",
          price: 25000,
          stock: 15,
          category: "supplements",
          status: "active",
          image:
            "https://images.unsplash.com/photo-1593095948071-474c0f7143b3?w=400",
        },
        {
          id: 2,
          name: "Gym Gloves",
          description: "Professional gym gloves with wrist support",
          price: 8500,
          stock: 30,
          category: "accessories",
          status: "active",
          image:
            "https://images.unsplash.com/photo-1571019613454-1cb2f99b2d8b?w=400",
        },
      ];

      document.addEventListener("DOMContentLoaded", function () {
        // Check authentication
        if (localStorage.getItem("admin_authenticated") !== "true") {
          window.location.href = "admin-login.html";
          return;
        }

        loadProducts();
        setupEventListeners();
      });

      function setupEventListeners() {
        document
          .getElementById("productForm")
          .addEventListener("submit", saveProduct);
        document
          .getElementById("searchInput")
          .addEventListener("input", searchProducts);
      }

      function loadProducts() {
        const productsGrid = document.getElementById("productsGrid");
        const emptyState = document.getElementById("emptyState");

        if (products.length === 0) {
          productsGrid.style.display = "none";
          emptyState.style.display = "block";
          return;
        }

        productsGrid.style.display = "grid";
        emptyState.style.display = "none";

        productsGrid.innerHTML = products
          .map(
            (product) => `
          <div class="product-card">
            <div class="product-image">
              <img src="${
                product.image ||
                "https://via.placeholder.com/400x200/222/666?text=No+Image"
              }" alt="${product.name}">
            </div>
            <div class="product-details">
              <div class="product-name">${product.name}</div>
              <div class="product-description">${product.description}</div>
              <div class="product-meta">
                <div class="product-price">₦${product.price.toLocaleString()}</div>
                <div class="product-stock">${product.stock} in stock</div>
              </div>
              <div class="product-actions">
                <button class="btn-edit" onclick="editProduct(${product.id})">
                  <i class="fa fa-edit"></i> Edit
                </button>
                <button class="btn-delete" onclick="deleteProduct(${
                  product.id
                })">
                  <i class="fa fa-trash"></i> Delete
                </button>
              </div>
            </div>
          </div>
        `
          )
          .join("");
      }

      function searchProducts() {
        const searchTerm = document
          .getElementById("searchInput")
          .value.toLowerCase();
        const filteredProducts = products.filter(
          (product) =>
            product.name.toLowerCase().includes(searchTerm) ||
            product.description.toLowerCase().includes(searchTerm) ||
            product.category.toLowerCase().includes(searchTerm)
        );

        if (searchTerm === "") {
          loadProducts();
        } else {
          renderFilteredProducts(filteredProducts);
        }
      }

      function renderFilteredProducts(filteredProducts) {
        const productsGrid = document.getElementById("productsGrid");
        const emptyState = document.getElementById("emptyState");

        if (filteredProducts.length === 0) {
          productsGrid.style.display = "none";
          emptyState.style.display = "block";
          emptyState.innerHTML = `
            <i class="fa fa-search"></i>
            <h3>No Products Found</h3>
            <p>No products match your search criteria.</p>
          `;
          return;
        }

        productsGrid.style.display = "grid";
        emptyState.style.display = "none";

        productsGrid.innerHTML = filteredProducts
          .map(
            (product) => `
          <div class="product-card">
            <div class="product-image">
              <img src="${
                product.image ||
                "https://via.placeholder.com/400x200/222/666?text=No+Image"
              }" alt="${product.name}">
            </div>
            <div class="product-details">
              <div class="product-name">${product.name}</div>
              <div class="product-description">${product.description}</div>
              <div class="product-meta">
                <div class="product-price">₦${product.price.toLocaleString()}</div>
                <div class="product-stock">${product.stock} in stock</div>
              </div>
              <div class="product-actions">
                <button class="btn-edit" onclick="editProduct(${product.id})">
                  <i class="fa fa-edit"></i> Edit
                </button>
                <button class="btn-delete" onclick="deleteProduct(${
                  product.id
                })">
                  <i class="fa fa-trash"></i> Delete
                </button>
              </div>
            </div>
          </div>
        `
          )
          .join("");
      }

      function openAddProductModal() {
        document.getElementById("modalTitle").textContent = "Add New Product";
        document.getElementById("productForm").reset();
        document.getElementById("productId").value = "";
        document.getElementById("productModal").style.display = "block";
      }

      function closeProductModal() {
        document.getElementById("productModal").style.display = "none";
      }

      function editProduct(id) {
        const product = products.find((p) => p.id === id);
        if (!product) return;

        document.getElementById("modalTitle").textContent = "Edit Product";
        document.getElementById("productId").value = product.id;
        document.getElementById("productName").value = product.name;
        document.getElementById("productDescription").value =
          product.description;
        document.getElementById("productPrice").value = product.price;
        document.getElementById("productStock").value = product.stock;
        document.getElementById("productCategory").value = product.category;
        document.getElementById("productStatus").value = product.status;
        document.getElementById("productImage").value = product.image || "";

        document.getElementById("productModal").style.display = "block";
      }

      function saveProduct(e) {
        e.preventDefault();

        const productId = document.getElementById("productId").value;
        const productData = {
          name: document.getElementById("productName").value,
          description: document.getElementById("productDescription").value,
          price: parseFloat(document.getElementById("productPrice").value),
          stock: parseInt(document.getElementById("productStock").value),
          category: document.getElementById("productCategory").value,
          status: document.getElementById("productStatus").value,
          image: document.getElementById("productImage").value,
        };

        if (productId) {
          // Update existing product
          const index = products.findIndex((p) => p.id === parseInt(productId));
          if (index !== -1) {
            products[index] = { ...products[index], ...productData };
          }
        } else {
          // Add new product
          const newId =
            products.length > 0
              ? Math.max(...products.map((p) => p.id)) + 1
              : 1;
          products.push({ id: newId, ...productData });
        }

        localStorage.setItem("admin_products", JSON.stringify(products));
        loadProducts();
        closeProductModal();

        // Show success message
        alert("Product saved successfully!");
      }

      function deleteProduct(id) {
        if (
          confirm(
            "Are you sure you want to delete this product? This action cannot be undone."
          )
        ) {
          products = products.filter((p) => p.id !== id);
          localStorage.setItem("admin_products", JSON.stringify(products));
          loadProducts();
          alert("Product deleted successfully!");
        }
      }

      // Close modal when clicking outside
      window.onclick = function (event) {
        const modal = document.getElementById("productModal");
        if (event.target === modal) {
          closeProductModal();
        }
      };
    </script>
  </body>
</html>
